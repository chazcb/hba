<div data-role="content">
<div class="tag-input">
  <h2>Add Tags</h2>
  <input id="tag-field" class="form-control" class="typeahead" type="text" placeholder="Describe your list">
  <button type="button" id="add-tag-button" class="btn btn-default btn-sm">Add Tag</button>
</div>

<div class="display-tags">
  <h2>Tags you added:</h2>
  <a id="display-tag-list" href=""></a>
</div>

<script>

function main() {

  var tagList = [];

  var substringMatcher = function(strs) {
      return function findMatches(q, cb) {
          var matches, substrRegex;
          // an array that will be populated with substring matches
          matches = [];
          // regex used to determine if a string contains the substring `q`
          substrRegex = new RegExp(q, 'i');
          // iterate through the pool of strings and for any string that
          // contains the substring `q`, add it to the `matches` array
          $.each(strs, function(i, str) {
            if (substrRegex.test(str)) {
              // the typeahead jQuery plugin expects suggestions to a
              // JavaScript object, refer to typeahead docs for more info
              matches.push({ value: str });
            }
          });
          cb(matches);
      };
  };

  var data = {{db_tag_list|tojson}};

  $('#tag-field').typeahead({
    hint: true,
    highlight: true,
    minLength: 1
  },
  {
    name: 'data',
    displayKey: 'value',
    source: substringMatcher(data)
  });

  var selectTag = $("button#add-tag-button");
  selectTag.click(function(e){

    e.preventDefault();
    e.stopPropagation();

    var inputVal = document.getElementById("tag-field").value;
    if (inputVal.length > 0) {
      tagList.push(inputVal);
      console.log(tagList);
    }
    if (tagList.length > 0) {
      document.getElementById("display-tag-list").innerHTML=tagList;
    }
  });



}

$(main);


</script>
</div>
